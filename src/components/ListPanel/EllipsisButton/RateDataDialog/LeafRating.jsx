import React from 'react';
import { makeStyles } from '@material-ui/core/styles';
import Rating from '@material-ui/lab/Rating';
import Box from '@material-ui/core/Box';
import PropTypes from 'prop-types';

const Leaf = () => (
  <svg width="48" height="51" viewBox="0 0 48 51" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M23.8922 51C23.3195 51 22.8637 50.5199 22.8936 49.9479L23.4194 39.8645C23.4278 39.6814 23.3951 39.4987 23.3235 39.3299C23.252 39.1611 23.1436 39.0105 23.0061 38.8892C22.8687 38.7678 22.7058 38.6789 22.5295 38.6288C22.3531 38.5788 22.1678 38.5689 21.9871 38.6L12.6055 40.2491C11.8482 40.3823 11.2302 39.6464 11.4923 38.9234L12.4 36.4194C12.4607 36.2551 12.4685 36.0759 12.4222 35.9069C12.3759 35.738 12.2779 35.5878 12.1419 35.4774L1.24294 26.6517C0.668751 26.1867 0.779693 25.2811 1.44914 24.9684L2.73548 24.3677C2.92023 24.2804 3.06676 24.1287 3.14753 23.941C3.22831 23.7533 3.23779 23.5426 3.17419 23.3484L1.30973 17.6146C1.07169 16.8826 1.71529 16.1674 2.46827 16.3272L7.76774 17.4516C7.95721 17.4911 8.15451 17.4639 8.32619 17.3745C8.49787 17.2851 8.63336 17.1392 8.70968 16.9613L9.46216 15.1912C9.74536 14.525 10.6206 14.3711 11.1141 14.9007L15.5226 19.6323C15.6474 19.7639 15.8115 19.8515 15.9903 19.882C16.1691 19.9125 16.353 19.8842 16.5144 19.8013C16.6757 19.7184 16.8059 19.5855 16.8853 19.4224C16.9647 19.2593 16.9891 19.0749 16.9548 18.8968L14.7403 7.47683C14.5771 6.63487 15.4799 5.9915 16.2224 6.42067L18.5419 7.76129C18.641 7.81935 18.7509 7.85645 18.8649 7.87029C18.9789 7.88414 19.0945 7.87442 19.2046 7.84176C19.3147 7.8091 19.4169 7.75419 19.5049 7.68042C19.5929 7.60665 19.6648 7.5156 19.7161 7.4129L23.1089 0.750035C23.4797 0.0217179 24.5203 0.0217192 24.8911 0.750037L28.2839 7.4129C28.3352 7.5156 28.4071 7.60665 28.4951 7.68042C28.5831 7.75419 28.6853 7.8091 28.7954 7.84176C28.9055 7.87442 29.0211 7.88414 29.1351 7.87029C29.2491 7.85645 29.359 7.81935 29.4581 7.76129L31.7776 6.42067C32.5201 5.9915 33.4229 6.63487 33.2597 7.47683L31.0452 18.8968C31.0109 19.0749 31.0353 19.2593 31.1147 19.4224C31.1941 19.5855 31.3243 19.7184 31.4856 19.8013C31.647 19.8842 31.8309 19.9125 32.0097 19.882C32.1885 19.8515 32.3526 19.7639 32.4774 19.6323L36.8859 14.9007C37.3794 14.3711 38.2546 14.525 38.5378 15.1912L39.2903 16.9613C39.3666 17.1392 39.5021 17.2851 39.6738 17.3745C39.8455 17.4639 40.0428 17.4911 40.2323 17.4516L45.5317 16.3272C46.2847 16.1674 46.9283 16.8826 46.6903 17.6146L44.8258 23.3484C44.7622 23.5426 44.7717 23.7533 44.8525 23.941C44.9332 24.1287 45.0798 24.2804 45.2645 24.3677L46.5509 24.9684C47.2203 25.2811 47.3312 26.1867 46.7571 26.6517L35.8581 35.4774C35.7221 35.5878 35.6241 35.738 35.5778 35.9069C35.5315 36.0759 35.5393 36.2551 35.6 36.4194L36.5077 38.9234C36.7698 39.6464 36.1518 40.3823 35.3945 40.2491L26.0129 38.6C25.8322 38.5689 25.6469 38.5788 25.4705 38.6288C25.2942 38.6789 25.1313 38.7678 24.9939 38.8892C24.8564 39.0105 24.748 39.1611 24.6765 39.3299C24.6049 39.4987 24.5722 39.6814 24.5806 39.8645L25.1064 49.9479C25.1363 50.5199 24.6805 51 24.1078 51H23.8922Z" />
  </svg>
);

const useStyles = makeStyles({
  root: {
    '& svg': {
      margin: '0 0.3em',
    },
  },
  iconFilled: {
    '& svg': {
      fill: '#E73223',
    },
  },
  iconHover: {
    '& svg': {
      fill: '#771811',
    },
  },
  iconEmpty: {
    '& svg': {
      fill: '#C7C8C9',
    },
  },
  iconActive: {
    transform: 'none',
  },
});

const LeafRating = ({ rating, setHover, setRating }) => {
  const classes = useStyles();
  return (
    <>
      <Box component="fieldset" mb={3} borderColor="transparent" className={classes.root}>
        <Rating
          name="leafRating"
          classes={{
            iconFilled: classes.iconFilled,
            iconHover: classes.iconHover,
            iconEmpty: classes.iconEmpty,
            iconActive: classes.iconActive,
          }}
          value={rating}
          precision={1}
          icon={<Leaf />}
          onChange={(_, newValue) => {
            setRating(newValue);
          }}
          onChangeActive={(_, newHover) => {
            setHover(newHover);
          }}
        />
      </Box>
    </>
  );
};

export default LeafRating;

LeafRating.propTypes = {
  rating: PropTypes.number,
  setRating: PropTypes.func.isRequired,
  setHover: PropTypes.func.isRequired,
};

LeafRating.defaultProps = {
  rating: 0,
};
